<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"> 
    <title>Qualite de l'eau</title>
</head>

<body>
    <p>Qualite de l'eau</p>
    <form>
        <label for="ville">Nom de la ville:</label><br>
        <input type="text" id="ville" name="ville"><br>
        <input type="submit" value="Submit">
    </form>

    <script>
    document.querySelector('form').addEventListener('submit', function(e) {
        e.preventDefault(); // Empêche le rechargement de la page
        var ville = document.querySelector('#ville').value; // Récupère la valeur du champ de texte

        fetch('https://hubeau.eaufrance.fr/api/v2/qualite_rivieres/station_pc?libelle_commune=' + ville + '&pretty') // Utilise la valeur de la variable ville dans l'URL
            .then(response => response.json()) // Transforme la réponse en JSON
            .then(data => {
                console.log(data); // Affiche les données dans la console
                // Vous pouvez ajouter ici le code pour afficher les données sur la page
            })
            .catch(err => console.error(err)); // Affiche l'erreur dans la console en cas d'échec de la requête
    });
</script>
</body>
</html>